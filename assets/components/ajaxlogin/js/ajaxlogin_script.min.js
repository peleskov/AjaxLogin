!function(){const result={init:function(){this.eventSubscription()},eventSubscription:function(){$(document).on("af_complete",$.proxy(this.eventAfComplete,this))},eventAfComplete:function(event,response){this.cleanDOM(response),this.offLibraries(response),this.getService(response)},cleanDOM:function(response){$(response.form).find(".is-invalid").removeClass("is-invalid"),$(response.form).find(".invalid-feedback").remove(),$(response.form).find(".alert").hide()},offLibraries:function(response){response.message=""},getService:function(response){let modalID,imageBlock,alertClass;"modalID"in response.data&&(modalID=response.data.modalID),"imageBlock"in response.data&&(imageBlock=response.data.imageBlock);let service=response.data.service;const services_default=function(){let alert=response.form.find(".alert");response.data.nPh&&$("."+imageBlock).attr("src",response.data.nPh),response.data.result?(response.data.location&&(window.location=response.data.location),alertClass="alert-success",response.data.nPh&&imageBlock&&$("."+imageBlock).attr("src",response.data.nPh)):(alertClass="alert-danger",$.each(response.data.errors,(i,msg)=>{response.form.find('[name="'+i+'"]').addClass("is-invalid").after($('<span class="invalid-feedback">'+msg+"</span>"))})),modalID&&($(".modal").modal("hide"),$("#"+modalID).modal("show")),alert&&response.data.message&&alert.show().attr("class",alert.attr("class").replace(/\balert-\w*\b/g,"")).addClass(alertClass).text(response.data.message)};return services_default()}};result.init()}();